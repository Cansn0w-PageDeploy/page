(self.webpackChunk=self.webpackChunk||[]).push([[179],{7018:(e,t,n)=>{"use strict";var r=n(1542),s=n(7378);const c=()=>{};class a{constructor(e){this.subscribe=e}pipe(e){return e(this)}}const l=new class extends a{constructor(){super((e=>{const t=t=>e(t);return this.subscribers.push(t),()=>{const e=this.subscribers.indexOf(t);-1!==e&&this.subscribers.splice(e,1)}})),this.subscribers=[],this.next=this.next.bind(this)}next(e){this.subscribers.forEach((t=>t(e)))}},i=s.forwardRef((({path:e,children:t},n)=>{const r=(c=e,["",...c,""].join("/"));var c;return s.createElement("a",{href:r,onClick:t=>{t.defaultPrevented||0!==t.button||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)||(t.preventDefault(),l.next(e),history.pushState(null,document.title,r))},ref:n,children:t})})),o=[],u={home:o,post:function(...e){return e.flat()}(o,["post"])};var h=n(42),d=n.n(h);function m(){return s.createElement("div",null,"There is an error, please try reload.")}function p(){return s.createElement("div",null,"Home page")}function f(){return s.createElement("div",null,"Page not found")}class E{constructor(e,t,n,r,s){this.title=e,this.name=t,this.abstract=n,this.created=r,this.updated=s}static deserialize(e){return new E(e.title,e.name,e.abstract,new Date(e.created),new Date(e.updated))}}class g{constructor(e,t,n,r,s,c){this.title=e,this.name=t,this.abstract=n,this.created=r,this.updated=s,this.content=c}static deserialize(e){return new g(e.title,e.name,e.abstract,new Date(e.created),new Date(e.updated),e.content)}}class w{constructor(e){this.get=e,this.BASE="api",this.RECENT="recent",this.POSTS="posts"}async getPostList(){return this.get([this.BASE,this.POSTS]).then((e=>e.map(E.deserialize)))}async getPost(e){return this.get([this.BASE,this.POSTS,e]).then(g.deserialize)}async getRecentPosts(){return this.get([this.BASE,this.RECENT]).then((e=>e.map(E.deserialize)))}}function b(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function v(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}class k{constructor(e,t=[]){this.defualt=e,this.resources=t,this.resolve=this.resolve.bind(this)}register(...e){e.forEach((e=>this.resources.push(e)))}resolve(e){for(let{path:t,resolve:n,exact:r=!1}of this.resources)if((r?v:b)(t,e))return n(e);return this.defualt}}class y extends Error{}class x extends Error{}function P(e){return fetch(["",...e,""].join("/")).then((e=>{if(e.ok)return e.json();if(e.status>=500)throw new y("failed to retrieve resource");if(e.status>=404)throw new x("failed to retrieve resource")}))}function S(e=P){const t=new w(e);return new k(Promise.resolve({type:"notfound"}),[{path:u.home,exact:!0,resolve:async()=>({type:"home",content:await t.getRecentPosts()})},{path:u.post,exact:!0,resolve:async()=>({type:"postlist",content:await t.getPostList()})},{path:u.post,resolve:async([,e])=>({type:"postitem",content:await t.getPost(e)})}])}var _=n(4305),B=n(9784),C=n(3850),N=n(4338),O=n(9188),R=n(4701);const T={codeBlock:"_f",comment:"_g",punctuation:"_h",tag:"_i",function:"_j",string:"_k",keyword:"_l",plainText:"_m"};function $(e){if(null!=e)return d()(e.map((e=>{switch(e){case"token":return;case"comment":return T.comment;case"punctuation":return T.punctuation;case"function":return T.function;case"string":return T.string;case"keyword":return T.keyword;case"tag":return T.tag;case"token":return T.token;case"plain-text":return;default:throw new Error(`Unhandled highligh content: ${e}`)}})))}function D(e,t){var n;return"text"===e.type?e.value:s.createElement(e.tagName,{key:t,children:e.children.map(D),className:$(null===(n=e.properties)||void 0===n?void 0:n.className)})}_.$.register(R.Z);const z=({code:e,language:t})=>{const n=_.$.highlight(e,t);return s.createElement("pre",null,s.createElement("code",{className:T.codeBlock},n.children.map(D)))};class L{constructor(e,t){this.name=e,this.params=t}static deserialize(e){return new L(e.name,e.params)}}class A extends s.Component{constructor(e){super(e),this.state={render:void 0}}componentDidMount(){(async function(e){const{name:t,params:r}=L.deserialize(JSON.parse(e));switch(t){case"hello-world":return function(e,t){return e.then((({createWidget:e})=>e(t)))}(n.e(544).then(n.bind(n,8544)),r);default:return()=>s.createElement("div",null,"Failed to load component")}})(this.props.code).then((e=>this.setState({render:e})))}render(){return this.state.render?this.state.render():s.createElement("div",null,"Loading...")}}const j=N().use(C).use(B);class q extends Error{constructor(e){super(`Unsuppoted markdown content type: ${e.type}, receoved ${JSON.stringify(e)}`)}}function K(e){const t=[e];return function(e){let n=0;const r=e(t[t.length-1],(e=>{n+=1,t.push(e)}));return t.splice(t.length-n,t.length),r}}const J={left:"_c",center:"_e",right:"_d"},M={codeBlock:(e,t,n)=>"widget"===t?s.createElement(A,{code:e}):t&&_.$.registered(t)?s.createElement(z,{code:e,language:t}):s.createElement("pre",null,s.createElement("code",null,e.trim())),blockquote:e=>s.createElement("blockquote",null,e),heading:(e,t,n)=>s.createElement(`h${t}`,{children:e,key:n,id:n}),thematicBreak:()=>s.createElement("hr",null),list:(e,t=!1,n)=>t?s.createElement("ol",{start:n},e):s.createElement("ul",null,e),listitem:e=>s.createElement("li",null,e),checkbox:e=>s.createElement("input",{type:"checkbox",checked:e,readOnly:!0}),paragraph:e=>s.createElement("p",null,e),table:(e,t)=>s.createElement("table",null,s.createElement("thead",null,e),s.createElement("tbody",null,t)),tablerow:e=>s.createElement("tr",null,e),tablecell(e,t,n){let r=n&&J[n];const c=t?"th":"td";return s.createElement(c,{className:r},e)},strong:e=>s.createElement("strong",null,e),emphasis:e=>s.createElement("em",null,e),inlineCode:e=>s.createElement("code",null,e),delete:e=>s.createElement("del",null,e),link:(e,t,n)=>s.createElement("a",{href:t,title:n},e),image:(e,t,n)=>s.createElement("img",{src:e,title:t,alt:n}),text:e=>e,break:()=>s.createElement("br",null)},F=K(!1),H=K(!1),I=K(void 0),U=K(void 0);function W(e){return s.Children.toArray(e.map((e=>{switch(e.type){case"paragraph":return F(((t,n)=>(n(!1),t?M.paragraph(W(e.children)):W(e.children))));case"heading":return M.heading(W(e.children),e.depth);case"thematicBreak":return M.thematicBreak();case"blockquote":return M.blockquote(W(e.children));case"list":return e.spread,M.list(W(e.children),e.ordered,e.start);case"table":return I(((t,n)=>H(((t,r)=>{n(e.align),r(!0);const s=W(e.children.slice(0,1));r(!1);const c=W(e.children.slice(1));return M.table(s,c)}))));case"html":throw new q(e);case"code":return M.codeBlock(e.value,e.lang,e.meta);case"yaml":case"definition":case"footnoteDefinition":throw new q(e);case"listItem":return F(((t,n)=>(n(e.spread||!1),null==e.checked?M.listitem(W(e.children)):M.listitem(s.createElement(s.Fragment,null,M.checkbox(e.checked),W(e.children))))));case"tableRow":return I((t=>M.tablerow(e.children.map(((e,n)=>U(((r,s)=>(t&&s(t[n]),W([e])))))))));case"tableCell":return H((t=>U((n=>M.tablecell(W(e.children),t,null!=n?n:void 0)))));case"text":return M.text(e.value);case"emphasis":return M.emphasis(W(e.children));case"strong":return M.strong(W(e.children));case"delete":return M.delete(W(e.children));case"html":throw new q(e);case"inlineCode":return M.inlineCode(e.value);case"break":return M.break();case"image":return M.image(e.url,e.title,e.alt);case"imageReference":case"footnote":case"footnoteReference":throw new q(e);case"link":return M.link(W(e.children),e.url,e.title);case"linkReference":throw new q(e);default:throw new Error(`failed to render ${JSON.stringify(e)} element`)}})))}const Z=({content:e})=>{const t=j.parse(e);if(O(t,"root"))return s.createElement("div",null,W(t.children));throw new Error(`Expected mdast.Root, received ${t.type}`)};function G({post:{title:e,content:t}}){return s.createElement("div",null,s.createElement("h1",null,e),s.createElement(Z,{content:t}))}function Q({posts:e}){return s.createElement("div",null,s.createElement("h1",null,"Posts"),e.map((({name:e,title:t})=>s.createElement("ul",{key:e},s.createElement("li",null,s.createElement(i,{path:[...u.post,e]},t))))))}function V({page:e}){if(null==e)return s.createElement("div",null,"Loading...");switch(e.type){case"home":return s.createElement(p,null);case"postlist":return s.createElement(Q,{posts:e.content});case"postitem":return s.createElement(G,{post:e.content});case"notfound":return s.createElement(f,null);case"error":return s.createElement(m,null)}}function X({transition:e,children:t}){const n=d()("_a",e&&"_b");return s.createElement("div",{className:n},t)}window.addEventListener("DOMContentLoaded",(()=>{const e=window.bootstrap;window.addEventListener("popstate",(()=>{const e=location.pathname.split("/").filter((e=>""!==e));l.next(e)})),r.hydrate(function(e){const t=function({initialPage:e}){const t=S();return s.createElement((function(){const[n,r]=s.useState(e),[i,o]=s.useState(!1);return s.useEffect((()=>{return l.pipe((e=e=>new a((n=>{let r=!0;const s=new Promise((e=>setTimeout(e,400))),c=(e=>t.resolve(e).catch((e=>e instanceof y?{type:"notfound"}:{type:"error"})))(e),a=new Promise((e=>setTimeout(e,1200)));return o(!0),s.then((()=>(r&&n(void 0),c))).then((e=>{r&&(o(!1),n(e),r=!1)})),a.then((()=>{r&&(o(!1),n(void 0))})),()=>{r=!1}})),function(t){let n=c;return new a((r=>{const s=t.subscribe((async t=>{n(),n=e(t).subscribe(r)}));return()=>{n(),s()}}))})).subscribe(r);var e}),[]),s.createElement(X,{transition:i},s.createElement(V,{page:n}))}),null)}({initialPage:e.page});return s.createElement("div",null,s.createElement("ul",null,s.createElement("li",null,s.createElement(i,{path:u.home},"Home")),s.createElement("li",null,s.createElement(i,{path:u.post},"Posts"))),t)}(e),document.getElementById("root"))}))}},e=>{"use strict";e.O(0,[216],(()=>(7018,e(e.s=7018)))),e.O()}]);